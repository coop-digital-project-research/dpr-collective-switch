<% wrap_layout :layout do %>

    <div id="modal" class="col-9 modal">
	<div class="modal-dialog animated">
	    <div class="modal-content">
		<form class="form-horizontal" method="get">
		    <div class="modal-header">
			<strong>Switch to a green energy company</strong>
		    </div>

		    <div class="modal-body">
		      <p>Fill in your contact details so that Power Pack can call you and take care of your switch.</p>
                      Your full name
                      [mandatory field]

                      Your telephone number
                      [mandatory field]

                      If you know the name of your energy company then fill it in. If you don’t know it, it’s OK to leave this blank.
                      [optional field]

		      <p>
		      Please confirm that you agree to
                      </p>

                      <ul>
			<li>Power Pack calling you to arrange your switch</li>
		        <li>switching to a green 100% renewable energy company</li>
			<li>[school name] receiving a payment of [amount]</li>
		      </ul>

                      <p>
                      I confirm that I am happy for Power Pack to call me and switch me to a green energy provider, and for [school] to receive a payment from Power Pack for referring me to this scheme.
                      </p>
                      [tick box]

                      [submit button]
		    </div>

		    <div class="modal-footer">
			<button class="btn btn-primary"
			  type="submit" onclick="modal.close();">
			    Close
			</button>
		    </div>
		</form>
	    </div>
	</div>
    </div>

<div class="banner">
  <div class="container">
    <header class="row">
      <div class="col-3">
        <%= image_tag current_page.data.slug + '/logo.jpg', class: "" %>
      </div>
      <div class="col-9">
        <h1>Help us buy <%= current_page.data.raising_money_for %> by switching your energy company </h1>

      </div>
    </header>
  </div>
</div>

<div class="container">
  <div class="row headlines">
    <div class="col-3 colophon">

      <div class="cta">

        <p class="pledges"><span class="count"><%= current_page.data.pledges_got %></span> pledges</p>

        <%= image_tag "pledge-count.svg", class: 'counter' %>

        <span class="required-pledges"><%= current_page.data.pledges_needed %></span>

        <p class="button"><a href="#" id="showModal">Pledge now</a></p>

        <p>We’ve set ourselves a target of getting <%= current_page.data.pledges_needed %> families to switch, which would mean <%= current_page.data.raising_money_for %>.</p>

      </div>
      <div class="green-mission">
        <span>Supported by</span>
        <%= image_tag "power-pack-supported.svg", class: "" %>
        <p>Schools around the UK are joining up with Power Pack to help ensure we no longer need to burn fossil fuels. Supported by Co-op.</p>
      </div>
    </div>



    <div class="col-9 proposition">
      <h2>How does changing your energy company pay for <%= current_page.data.able_to_buy %>?</h2>

      <p><strong>Confused? That’s fair enough. But here’s the thing.</stong></p>

      <p>We need <%= current_page.data.raising_money_for %>.</p>

      <p>We're not asking you for any money.</p>

      <p>Instead, we want you to switch to a green energy company.</p>

      <p><%= current_page.data.school_name %> has joined up with Power Pack - a company that helps people switch to green energy.</p>

      <p>Every time a family switches, Power Pack will give our school money for <%= current_page.data.each_pledge_value %>.</p>

      <p>And if you get your energy from one of the 'big six' companies, and you've not switched recently, you'll see your bills go down.</p>

      <p>When <%= current_page.data.pledges_needed %> families switch, we get <%= current_page.data.specific_pledge_need %>.</p>

    </div>
  </div>
</div>
<div class="container">
  <div class="row steps">
    <div class="col-12">
      <h2>How it works</h2>
    </div>
    <div class="col-4">
      <%= image_tag "icon-pledge.svg", class: "" %>
      <h3>You pledge</h3>
      <p>Just provide your name, email and address. It’s quick and painless!</p>
    </div>
    <div class="col-4">
      <%= image_tag "icon-switch.svg", class: "" %>
      <h3>Power Pack switches</h3>
      <p>Everything is taken care of - Power Pack sets you up with a cheap green energy company.</p>
    </div>
    <div class="col-4">
      <%= image_tag "icon-benefit.svg", class: "" %>
      <h3>Your school benefits</h3>
      <p>Your new energy company pays us for helping the switch and we’re able to buy <%= current_page.data.raising_money_for %>.</p>
    </div>

    <div class="col-9">
      <h2>Why you should switch</h2>

      <p><strong>It's easy</strong> - you answer 2 questions, and Power Pack will do the rest.</p>

      <p><strong>You only have to switch once</strong> - you’ll be on a variable green tariff that’s always cheaper than the ‘big six’ energy companies standard variable tariff </p>

    </div>
  </div>
</div>
<div class="cta">
  <div class="container">
    <section class="row">
      <div class="col-8">

        <h2>Ready to switch?</h2>
        <p>Pledge to switch, and help us buy <%= current_page.data.raising_money_for %></p>

        <p class="pledges"><span class="count"><%= current_page.data.pledges_got %></span> pledges</p>

        <%= image_tag "pledge-count.svg", class: 'counter' %>

        <span class="required-pledges"><%= current_page.data.pledges_needed %></span>

        <p class="button"><a href="#">Pledge now</a></p>

      </div>
    </section>
  </div>
</div>


<footer>
  <div class="container">
    <div class="row">
      <div class="col-9">
        <p>Power Pack is a community of people on a mission to power Britain purely by renewables.</p>
        <p>Switching to a green energy provider is the first, simple step you can take on this mission.</p>
      </div>
      <div class="col-3 colophon">
        <span>Supported by</span>
        <%= image_tag "power-pack-supported-reverse.svg", class: "" %>
      </div>
    </div>
  </div>
</footer>

<%= javascript_include_tag 'rmodal' %>

<script>

  var options = {
      closeTimeout: 500 // Time to wait (ms) before afterClose() is called

      /**
       * Callbacks
       */
      , beforeOpen: function(next) {
          console.log('I will execute right before the dialog is shown');
          next();
      }
      , afterOpen: function() {
          console.log('I will execute just after the dialog is shown');
      }
      , beforeClose: function(next) {
          console.log('I will execute right before the dialog is closed');
          next();
      }
      , afterClose: function() {
          console.log('I will execute just after the dialog is closed');
      }

      /**
       * Classes
       */

      // Added to body element clases while the modal is opened:
      , bodyClass: 'modal-open'

      // Always added to dialog element classes:
      , dialogClass: 'modal-dialog modal-dialog-lg'

      // Added to dialog element classes after it is opened:
      , dialogOpenClass: 'animated fadeIn'

      // Added to dialog element classes before it is closed:
      , dialogCloseClass: 'animated fadeOut'

      /**
       * Focus
       */

      // Set this to "false" to disable focus capture (tab/shit+tab):
      , focus: true

      // Set this to "false" to disable closing when escape key pressed:
      , escapeClose: true
  };

options = {};

window.onload = function() {
            var modal = new RModal(
                document.getElementById('modal'),
                options // See "Options" below details
            );

            document.addEventListener('keydown', function(ev) {
                modal.keydown(ev);
            }, false);

            document.getElementById('showModal')
            .addEventListener("click", function(ev) {
                ev.preventDefault();
                modal.open();
            }, false);

            window.modal = modal;
        }
</script>

<% end %>
